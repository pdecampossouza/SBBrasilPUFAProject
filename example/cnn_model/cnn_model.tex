\documentclass[border=15pt, multi, tikz]{standalone}
\usepackage{import}
\subimport{../../layers/}{init}
\usetikzlibrary{positioning}

% Cores
\def\ConvColor{rgb:yellow,5;red,2.5;white,5}
\def\ConvReluColor{rgb:yellow,5;red,5;white,5}
\def\PoolColor{rgb:red,1;black,0.3}
\def\FcColor{rgb:blue,5;white,4}
\def\FcReluColor{rgb:blue,5;white,8}
\def\SoftmaxColor{rgb:magenta,5;black,7}

\begin{document}
\begin{tikzpicture}
\tikzstyle{connection}=[ultra thick,every node/.style={sloped,allow upside down},draw=\edgecolor,opacity=0.7]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Input
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pic[shift={(0,0,0)}] at (0,0,0) {RightBandedBox={
    name=input,
    caption=input,
    xlabel={{"128",""}},
    zlabel=3,
    fill=\ConvColor,
    bandfill=\ConvReluColor,
    height=40,
    width=2,
    depth=40
}};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Conv1 + Pool1
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pic[shift={(1.5,0,0)}] at (input-east) {RightBandedBox={
    name=conv1,
    caption=Conv2D(32),
    xlabel={{"32",""}},
    zlabel=128,
    fill=\ConvColor,
    bandfill=\ConvReluColor,
    height=40,
    width=6,
    depth=40
}};
\pic[shift={(1.2,0,0)}] at (conv1-east) {Box={
    name=pool1,
    caption=MaxPool,
    fill=\PoolColor,
    opacity=0.5,
    height=30,
    width=1,
    depth=30
}};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Conv2 + Pool2
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pic[shift={(1.8,0,0)}] at (pool1-east) {RightBandedBox={
    name=conv2,
    caption=Conv2D(64),
    xlabel={{"64",""}},
    zlabel=64,
    fill=\ConvColor,
    bandfill=\ConvReluColor,
    height=30,
    width=8,
    depth=30
}};
\pic[shift={(1.2,0,0)}] at (conv2-east) {Box={
    name=pool2,
    caption=MaxPool,
    fill=\PoolColor,
    opacity=0.5,
    height=20,
    width=1,
    depth=20
}};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Conv3 + Pool3
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pic[shift={(1.8,0,0)}] at (pool2-east) {RightBandedBox={
    name=conv3,
    caption=Conv2D(256),
    xlabel={{"256",""}},
    zlabel=32,
    fill=\ConvColor,
    bandfill=\ConvReluColor,
    height=20,
    width=10,
    depth=20
}};
\pic[shift={(1.2,0,0)}] at (conv3-east) {Box={
    name=pool3,
    caption=MaxPool,
    fill=\PoolColor,
    opacity=0.5,
    height=10,
    width=1,
    depth=10
}};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Dense Layers
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pic[shift={(2.0,0,0)}] at (pool3-east) {RightBandedBox={
    name=dense1,
    caption=Dense(256),
    xlabel={{"256",""}},
    fill=\FcColor,
    bandfill=\FcReluColor,
    height=6,
    width=4,
    depth=6
}};
\pic[shift={(1.5,0,0)}] at (dense1-east) {Box={
    name=output,
    caption=Output(2),
    xlabel={{"2",""}},
    fill=\SoftmaxColor,
    height=4,
    width=2,
    depth=4
}};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Connections
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\draw [connection] (input-east) -- node {\midarrow} (conv1-west);
\draw [connection] (conv1-east) -- node {\midarrow} (pool1-west);
\draw [connection] (pool1-east) -- node {\midarrow} (conv2-west);
\draw [connection] (conv2-east) -- node {\midarrow} (pool2-west);
\draw [connection] (pool2-east) -- node {\midarrow} (conv3-west);
\draw [connection] (conv3-east) -- node {\midarrow} (pool3-west);
\draw [connection] (pool3-east) -- node {\midarrow} (dense1-west);
\draw [connection] (dense1-east) -- node {\midarrow} (output-west);

\end{tikzpicture}
\end{document}
